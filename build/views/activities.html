<div class="activities container-fluid"><div class="row"><div class="col-md-12"><div class="selected-activity"><div class="messages"><ul class="list-group"><li class="list-group-item fade-view" ng-class="'list-group-item-' + message.type" ng-repeat="message in alerts track by $index">{{message.text}}</li></ul></div><div class="modal fade" id="selectedActivity"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Selected Activity Details</h4></div><div class="modal-body"><form class="form-horizontal" name="selectedActivityForm" role="form"><div class="form-group"><label class="col-xs-2 control-label" for="date">Date</label><div class="col-xs-3"><datetimepicker model="selectedActivity.date" name="date"></datetimepicker></div></div><div class="form-group"><label class="col-xs-2 control-label" for="description">Description</label><div class="col-xs-10"><input class="form-control" maxLength="30" name="description" ng-click="selectAllOnClick($event)" ng-model="selectedActivity.description" type="text" /></div></div><div class="form-group"><label class="col-xs-2 control-label" for="notes">Notes</label><div class="col-xs-10"><textarea class="form-control" name="notes" ng-model="selectedActivity.notes" type="text"></textarea></div></div><div class="form-group"><div class="col-xs-10 col-xs-offset-2"><div class="checkbox"><label><input name="isAPM" ng-model="selectedActivity.isAPM" type="checkbox" />Was this activity part of the APM clinic?</label></div><div class="checkbox" ng-show="selectedActivity.isAPM"><label><input name="contributesTherapeutically" ng-model="selectedActivity.contributesTherapeutically" type="checkbox" />Did this activity meet purpose?</label></div></div></div><div class="form-group"><div class="col-xs-10 col-xs-offset-2"><div class="checkbox"><label><input name="involveHandoff" ng-model="selectedActivity.involveHandoff" type="checkbox" />Did this activity involve a handoff?</label></div></div></div><div class="form-group"><div class="col-xs-10 col-xs-offset-2"><div class="checkbox"><label><input name="involveContact" ng-model="selectedActivity.involveContact" type="checkbox" />Did this activity involve direct contact with the client?</label></div></div></div></form><div class="row"><div class="col-xs-3 col-xs-offset-1"><form name="staffInvolvedForm"><div class="form-group"><label class="control-label" for="staffInvolved">Staff involved</label><div class="input-group"><input autocomplete="off" class="form-control" name="newStaffName" ng-model="newStaffName" required="" type="text" typeahead="staff for staff in staffInvolved(activities) | filter:$viewValue" /><span class="input-group-btn"><button class="btn btn-default" ng-click="addNewStaffInvolved()" ng-disabled="staffInvolvedForm.$invalid">+</button></span></div></div><div class="form-group"><ul class="list-group staff-involved"><li class="list-group-item" ng-repeat="staffName in selectedActivity.staffInvolved track by $index">{{staffName}}<button aria-hidden="true" class="close" ng-click="removeStaffInvolved(staffName)" type="button">&times;</button></li></ul></div></form></div><div class="col-xs-3 col-xs-offset-1"><form name="itSystemForm"><div class="form-group"><label class="control-label" for="itSystem">IT System updated</label><div class="input-group"><input autocomplete="off" class="form-control" name="newITSystemName" ng-model="newITSystemName" required="" type="text" typeahead="system for system in itSystemsUpdated(activities) | filter:$viewValue" /><span class="input-group-btn"><button class="btn btn-default" ng-click="addNewITSystem()" ng-disabled="itSystemForm.$invalid">+</button></span></div></div><div class="form-group"><ul class="list-group it-systems-updated"><li class="list-group-item" ng-repeat="systemName in selectedActivity.itSystems track by $index">{{systemName}}<button aria-hidden="true" class="close" ng-click="removeITSystem(systemName)" type="button">&times;</button></li></ul></div></form></div><div class="col-xs-3 col-xs-offset-1"><form name="paperRecordForm"><div class="form-group"><label class="control-label" for="paperRecord">Paper Record updated</label><div class="input-group"><input autocomplete="off" class="form-control" name="newPaperRecord" ng-model="newPaperRecord" required="" type="text" typeahead="paperName for paperName in paperRecordslist(activities) | filter:$viewValue" /><span class="input-group-btn"><button class="btn btn-default" ng-click="addNewPaperRecord()" ng-disabled="paperRecordForm.$invalid">+</button></span></div></div><div class="form-group"><ul class="list-group paper-records-updated"><li class="list-group-item" ng-repeat="paperRecordName in selectedActivity.paperRecords track by $index">{{paperRecordName}}<button aria-hidden="true" class="close" ng-click="removePaperRecord(paperRecordName)" type="button">&times;</button></li></ul></div></form></div></div></div><div class="modal-footer"><div class="messages"><ul class="list-group"><li class="list-group-item fade-view" ng-class="'list-group-item-' + message.type" ng-repeat="message in alerts track by $index">{{message.text}}</li></ul></div><a class="btn btn-danger pull-left" ng-click="delete()">Delete this activity</a><a class="btn btn-primary" ng-click="save(true)" type="submit">Save</a></div></div></div></div></div></div><div class="col-md-8"><div class="journey"><div class="panel panel-info"><div class="panel-heading"><h4 class="panel-title">Journey for {{user.name}}</h4></div><div class="panel-body"><div class="form-group pull-right"><button class="btn btn-primary" ng-click="new()">Add a New Activity</button></div><div class="form-group"><button class="btn btn-default" data-target="#selectedActivity" data-toggle="modal" ng-show="selectedActivity">Edit Selected Activity </button></div><timeline></timeline></div></div></div></div><div class="col-md-4"><div class="journeySummary" ng-controller="JourneySummaryController"><div class="panel panel-info"><div class="panel-heading"><h3 class="panel-title">Journey Summary for {{user.name}}</h3></div><ul class="list-group"><li class="list-group-item"><span class="badge">{{numberOfHandoffs(activities)}}</span>Handoffs</li><li class="list-group-item"><span class="badge">{{numberOfContacts(activities)}}</span>Direct contacts</li><li class="list-group-item"><span class="badge">{{numberOfStaffInvolved(activities)}}</span>Staff involved</li><li class="list-group-item"><span class="badge">{{numberOfITSystemUpdated(activities)}}</span>Different IT Systems</li><li class="list-group-item"><span class="badge">{{countOfITSystemUpdates(activities)}}</span>Updates to IT Systems</li><li class="list-group-item"><span class="badge">{{numberOfPaperRecordUpdated(activities)}}</span>Paper records updated</li><li class="list-group-item"><span class="badge">{{countOfPaperRecordUpdates(activities)}}</span>Updates to paper records</li><li class="list-group-item"><span class="badge">{{numberOfTherapeuticContributions(activities)}} of {{numberOfAPMActivities(activities)}}</span>APM activities that met purpose</li></ul></div></div><div class="clinical-outcomes" ng-controller="UserDetailsController"><div class="panel panel-info"><div class="panel-heading"><h3 class="panel-title">Clinical Outcomes for {{user.name}}</h3></div><div class="panel-body"><form name="clinicalOutcomesForm" ng-submit="saveClinicalOutcomes(user, user.clinicalOutcomes)"><div class="form-group"><div class="messages"><ul class="list-group"><li class="list-group-item fade-view" ng-class="'list-group-item-' + message.type" ng-repeat="message in messages track by $index">{{message.text}}</li></ul></div></div><table class="table"><thead><tr><th>Appointment</th><th>Initial</th><th>Interim</th><th>Interim</th><th>Final</th></tr></thead><tbody><tr><td>K10</td><td><input class="form-control" name="k10_1" ng-model="user.clinicalOutcomes.1.k10" type="number" /></td><td></td><td></td><td><input class="form-control" name="k10_4" ng-model="user.clinicalOutcomes.4.k10" type="number" /></td></tr><tr><td>HONOS</td><td><input class="form-control" name="honos_1" ng-model="user.clinicalOutcomes.1.honos" type="number" /></td><td></td><td></td><td><input class="form-control" name="honos_4" ng-model="user.clinicalOutcomes.4.honos" type="number" /></td></tr><tr><td>Demoralisation</td><td><input class="form-control" name="demoralisation_1" ng-model="user.clinicalOutcomes.1.demoralisation" type="number" /></td><td></td><td></td><td><input class="form-control" name="demoralisation_4" ng-model="user.clinicalOutcomes.4.demoralisation" type="number" /></td></tr><tr><td>Basis 32</td><td><input class="form-control" name="basis32_1" ng-model="user.clinicalOutcomes.1.basis32" type="number" /></td><td></td><td></td><td><input class="form-control" name="basis32_4" ng-model="user.clinicalOutcomes.4.basis32" type="number" /></td></tr><tr><td rowspan="4">SRS</td><td><input class="form-control" name="srs_1_1" ng-model="user.clinicalOutcomes.1.srs1" type="number" /></td><td><input class="form-control" name="srs_2_1" ng-model="user.clinicalOutcomes.2.srs1" type="number" /></td><td><input class="form-control" name="srs_3_1" ng-model="user.clinicalOutcomes.3.srs1" type="number" /></td><td><input class="form-control" name="srs_4_1" ng-model="user.clinicalOutcomes.4.srs1" type="number" /></td></tr><tr><td><input class="form-control" name="srs_1_2" ng-model="user.clinicalOutcomes.1.srs2" type="number" /></td><td><input class="form-control" name="srs_2_2" ng-model="user.clinicalOutcomes.2.srs2" type="number" /></td><td><input class="form-control" name="srs_3_2" ng-model="user.clinicalOutcomes.3.srs2" type="number" /></td><td><input class="form-control" name="srs_4_2" ng-model="user.clinicalOutcomes.4.srs2" type="number" /></td></tr><tr><td><input class="form-control" name="srs_1_3" ng-model="user.clinicalOutcomes.1.srs3" type="number" /></td><td><input class="form-control" name="srs_2_3" ng-model="user.clinicalOutcomes.2.srs3" type="number" /></td><td><input class="form-control" name="srs_3_3" ng-model="user.clinicalOutcomes.3.srs3" type="number" /></td><td><input class="form-control" name="srs_4_3" ng-model="user.clinicalOutcomes.4.srs3" type="number" /></td></tr><tr><td><input class="form-control" name="srs_1_4" ng-model="user.clinicalOutcomes.1.srs4" type="number" /></td><td><input class="form-control" name="srs_2_4" ng-model="user.clinicalOutcomes.2.srs4" type="number" /></td><td><input class="form-control" name="srs_3_4" ng-model="user.clinicalOutcomes.3.srs4" type="number" /></td><td><input class="form-control" name="srs_4_4" ng-model="user.clinicalOutcomes.4.srs4" type="number" /></td></tr></tbody></table><div class="form-group"><button class="btn btn-primary" type="submit">Save</button></div></form></div></div></div><div class="user-details" ng-controller="UserDetailsController"><div class="panel panel-info"><div class="panel-heading"><h3 class="panel-title">Details for {{user.name}}</h3></div><div class="panel-body"><form name="userForm" ng-submit="save(user)"><div class="form-group"><div class="messages"><ul class="list-group"><li class="list-group-item fade-view" ng-class="'list-group-item-' + message.type" ng-repeat="message in messages track by $index">{{message.text}}</li></ul></div></div><div class="form-group"><div class="input-group" ng-class="validationClass(userForm, 'name')"><span class="input-group-addon">Name</span><input class="form-control" name="name" ng-model="user.name" required="" /></div></div><div class="form-group"><div class="input-group" ng-class="validationClass(userForm, 'urNumber')"><span class="input-group-addon">UR Number</span><input class="form-control" min="0" name="urNumber" ng-model="user.urNumber" required="" type="number" /></div></div><div class="form-group"><div class="input-group"><span class="input-group-addon">DOB</span><datetimepicker format="dd/mm/yyyy" minView="month" model="user.dob"></datetimepicker></div></div><div class="form-group"><select class="form-control" ng-model="user.gender" required=""><option value="">Select A Gender</option><option value="male">Male</option><option value="female">Female</option><option value="unspecified">Unspecified</option></select></div><div class="form-group"><button class="btn btn-primary" ng-disabled="userForm.$invalid" type="submit">Update</button></div></form></div></div></div></div></div></div>